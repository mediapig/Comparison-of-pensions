# ğŸŒ è´§å¸è½¬æ¢åŠŸèƒ½è¯´æ˜

## æ¦‚è¿°

é€€ä¼‘é‡‘å¯¹æ¯”ç³»ç»Ÿç°åœ¨æ”¯æŒ**å¤šè´§å¸è®¡ç®—å’Œæ˜¾ç¤º**ï¼Œå¯ä»¥è‡ªåŠ¨è·å–å®æ—¶æ±‡ç‡ï¼Œå¹¶åœ¨ä¸åŒè´§å¸ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚

## ğŸ¯ æ”¯æŒçš„è´§å¸

| è´§å¸ä»£ç  | è´§å¸åç§° | è¯´æ˜ |
|----------|----------|------|
| CNY | äººæ°‘å¸ | ç³»ç»Ÿé»˜è®¤åŸºå‡†è´§å¸ |
| USD | ç¾å…ƒ | å¯é€‰åŸºå‡†è´§å¸ |
| EUR | æ¬§å…ƒ | æ¬§ç›Ÿä¸»è¦è´§å¸ |
| GBP | è‹±é•‘ | è‹±å›½è´§å¸ |
| JPY | æ—¥å…ƒ | æ—¥æœ¬è´§å¸ |
| HKD | æ¸¯å¸ | é¦™æ¸¯è´§å¸ |
| SGD | æ–°å¸ | æ–°åŠ å¡è´§å¸ |
| AUD | æ¾³å¸ | æ¾³å¤§åˆ©äºšè´§å¸ |
| CAD | åŠ å¸ | åŠ æ‹¿å¤§è´§å¸ |
| TWD | æ–°å°å¸ | å°æ¹¾è´§å¸ |

## ğŸ”„ æ±‡ç‡è·å–æ–¹å¼

### 1. **å…è´¹API (æ¨è)**
- **ExchangeRate-API**: æ— éœ€æ³¨å†Œï¼Œå…è´¹ä½¿ç”¨
- **æ›´æ–°é¢‘ç‡**: æ¯å°æ—¶è‡ªåŠ¨æ›´æ–°
- **å¤‡ç”¨æ–¹æ¡ˆ**: å¦‚æœAPIå¤±è´¥ï¼Œä½¿ç”¨å†…ç½®é»˜è®¤æ±‡ç‡

### 2. **é»˜è®¤æ±‡ç‡**
ç³»ç»Ÿå†…ç½®äº†åŸºäº2024å¹´çš„å‚è€ƒæ±‡ç‡ï¼Œç¡®ä¿åœ¨APIä¸å¯ç”¨æ—¶ä»èƒ½æ­£å¸¸å·¥ä½œã€‚

## ğŸ’° ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬è´§å¸è½¬æ¢

```python
from utils.currency_converter import converter

# äººæ°‘å¸è½¬ç¾å…ƒ
cny_amount = 10000
usd_amount = converter.convert(cny_amount, "CNY", "USD")
print(f"Â¥{cny_amount} = ${usd_amount:.2f}")

# ç¾å…ƒè½¬æ¬§å…ƒ
eur_amount = converter.convert(usd_amount, "USD", "EUR")
print(f"${usd_amount:.2f} = â‚¬{eur_amount:.2f}")
```

### é€€ä¼‘é‡‘è®¡ç®—ä¸­çš„è´§å¸è½¬æ¢

```python
from core.models import EconomicFactors

# è®¾ç½®åŸºå‡†è´§å¸å’Œæ˜¾ç¤ºè´§å¸
economic_factors = EconomicFactors(
    inflation_rate=0.03,
    investment_return_rate=0.07,
    social_security_return_rate=0.05,
    base_currency="CNY",      # åŸºå‡†è´§å¸ï¼šäººæ°‘å¸
    display_currency="USD"    # æ˜¾ç¤ºè´§å¸ï¼šç¾å…ƒ
)

# è®¡ç®—ç»“æœä¼šè‡ªåŠ¨è½¬æ¢ä¸ºç¾å…ƒæ˜¾ç¤º
comparison_df = engine.compare_pensions(person, salary_profile, economic_factors)
```

### è´§å¸æ ¼å¼åŒ–

```python
# æ ¼å¼åŒ–è´§å¸æ˜¾ç¤º
formatted_cny = converter.format_amount(1234.56, "CNY")  # Â¥1,234.56
formatted_usd = converter.format_amount(1234.56, "USD")  # $1,234.56
formatted_eur = converter.format_amount(1234.56, "EUR")  # â‚¬1,234.56
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### 1. **æ±‡ç‡è½¬æ¢å™¨ (CurrencyConverter)**
- è‡ªåŠ¨è·å–å®æ—¶æ±‡ç‡
- æ”¯æŒå¤šç§åŸºå‡†è´§å¸
- å†…ç½®æ±‡ç‡ç¼“å­˜å’Œæ›´æ–°æœºåˆ¶

### 2. **æ•°æ®æ¨¡å‹æ›´æ–°**
- `EconomicFactors`: æ”¯æŒåŸºå‡†è´§å¸å’Œæ˜¾ç¤ºè´§å¸è®¾ç½®
- `PensionResult`: åŒ…å«åŸå§‹è´§å¸ä¿¡æ¯ï¼Œæ”¯æŒè´§å¸è½¬æ¢

### 3. **è®¡ç®—å¼•æ“é›†æˆ**
- è‡ªåŠ¨å¤„ç†è´§å¸è½¬æ¢
- æ”¯æŒå¤šè´§å¸å¯¹æ¯”åˆ†æ

## ğŸ“Š å®é™…åº”ç”¨åœºæ™¯

### 1. **å›½é™…å¯¹æ¯”åˆ†æ**
```python
# ä»¥äººæ°‘å¸ä¸ºåŸºå‡†ï¼Œç¾å…ƒæ˜¾ç¤º
economic_factors = EconomicFactors(
    base_currency="CNY",
    display_currency="USD"
)

# æ‰€æœ‰å›½å®¶çš„é€€ä¼‘é‡‘éƒ½ä¼šè½¬æ¢ä¸ºç¾å…ƒè¿›è¡Œå¯¹æ¯”
results = engine.compare_pensions(person, salary_profile, economic_factors)
```

### 2. **å¤šè´§å¸æŠ¥å‘Š**
```python
# ç”Ÿæˆä¸åŒè´§å¸çš„æŠ¥å‘Š
currencies = ["CNY", "USD", "EUR"]
for currency in currencies:
    economic_factors.display_currency = currency
    results = engine.compare_pensions(person, salary_profile, economic_factors)
    print(f"\n{currency} è´§å¸æŠ¥å‘Š:")
    print(results)
```

### 3. **æ±‡ç‡æ•æ„Ÿæ€§åˆ†æ**
```python
# åˆ†ææ±‡ç‡å˜åŒ–å¯¹é€€ä¼‘é‡‘å¯¹æ¯”çš„å½±å“
base_rates = converter.get_exchange_rates()
for currency in ["USD", "EUR", "GBP"]:
    # æ¨¡æ‹Ÿæ±‡ç‡å˜åŒ–
    new_rate = base_rates[currency] * 1.1  # å‡å€¼10%
    # é‡æ–°è®¡ç®—é€€ä¼‘é‡‘å¯¹æ¯”
    # ...
```

## âš™ï¸ é…ç½®é€‰é¡¹

### 1. **åŸºå‡†è´§å¸è®¾ç½®**
```python
# åˆ›å»ºäººæ°‘å¸åŸºå‡†çš„è½¬æ¢å™¨
cny_converter = CurrencyConverter("CNY")

# åˆ›å»ºç¾å…ƒåŸºå‡†çš„è½¬æ¢å™¨
usd_converter = CurrencyConverter("USD")
```

### 2. **æ›´æ–°é¢‘ç‡è®¾ç½®**
```python
# ä¿®æ”¹æ›´æ–°é—´éš”ï¼ˆé»˜è®¤1å°æ—¶ï¼‰
converter.update_interval = timedelta(hours=2)
```

### 3. **å¼ºåˆ¶æ›´æ–°æ±‡ç‡**
```python
# å¼ºåˆ¶æ›´æ–°æ±‡ç‡æ•°æ®
rates = converter.get_exchange_rates(force_update=True)
```

## ğŸ”§ æ•…éšœæ’é™¤

### 1. **APIè¿æ¥å¤±è´¥**
- ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤æ±‡ç‡
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®è®¤APIæœåŠ¡çŠ¶æ€

### 2. **æ±‡ç‡æ•°æ®è¿‡æœŸ**
- ç³»ç»Ÿæ¯å°æ—¶è‡ªåŠ¨æ›´æ–°
- å¯æ‰‹åŠ¨å¼ºåˆ¶æ›´æ–°
- é»˜è®¤æ±‡ç‡ç¡®ä¿åŸºæœ¬åŠŸèƒ½

### 3. **è´§å¸ä¸æ”¯æŒ**
- æ£€æŸ¥è´§å¸ä»£ç æ˜¯å¦æ­£ç¡®
- ç¡®è®¤è´§å¸åœ¨æ”¯æŒåˆ—è¡¨ä¸­
- æ·»åŠ æ–°è´§å¸æ”¯æŒ

## ğŸš€ æ‰©å±•åŠŸèƒ½

### 1. **æ·»åŠ æ–°è´§å¸**
```python
# åœ¨CurrencyConverterä¸­æ·»åŠ æ–°è´§å¸
self.supported_currencies['KRW'] = 'éŸ©å…ƒ'
```

### 2. **è‡ªå®šä¹‰æ±‡ç‡æº**
```python
# å®ç°è‡ªå®šä¹‰æ±‡ç‡è·å–é€»è¾‘
def _custom_exchange_rate_api(self):
    # è°ƒç”¨è‡ªå®šä¹‰API
    pass
```

### 3. **å†å²æ±‡ç‡æ”¯æŒ**
```python
# æ”¯æŒå†å²æ±‡ç‡æŸ¥è¯¢
def get_historical_rate(self, date, from_currency, to_currency):
    # å®ç°å†å²æ±‡ç‡æŸ¥è¯¢
    pass
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **æ±‡ç‡ç¼“å­˜**: é¿å…é¢‘ç¹APIè°ƒç”¨
- **æ‰¹é‡è½¬æ¢**: æ”¯æŒæ‰¹é‡è´§å¸è½¬æ¢
- **å¼‚æ­¥æ›´æ–°**: åå°å¼‚æ­¥æ›´æ–°æ±‡ç‡æ•°æ®

## ğŸ”’ å®‰å…¨è€ƒè™‘

- **APIé™æµ**: é¿å…è¶…è¿‡å…è´¹APIé™åˆ¶
- **é”™è¯¯å¤„ç†**: ä¼˜é›…å¤„ç†APIå¤±è´¥æƒ…å†µ
- **æ•°æ®éªŒè¯**: éªŒè¯æ±‡ç‡æ•°æ®çš„æœ‰æ•ˆæ€§

---

é€šè¿‡è´§å¸è½¬æ¢åŠŸèƒ½ï¼Œç³»ç»Ÿç°åœ¨å¯ä»¥ï¼š
1. **è‡ªåŠ¨è·å–å®æ—¶æ±‡ç‡**
2. **æ”¯æŒå¤šè´§å¸è®¡ç®—å’Œæ˜¾ç¤º**
3. **æä¾›å‡†ç¡®çš„å›½é™…å¯¹æ¯”åˆ†æ**
4. **çµæ´»é…ç½®åŸºå‡†å’Œæ˜¾ç¤ºè´§å¸**

è¿™å¤§å¤§å¢å¼ºäº†ç³»ç»Ÿçš„å›½é™…åŒ–å’Œå®ç”¨æ€§ï¼ğŸ‰
